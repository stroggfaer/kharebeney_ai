# Промт для переписывания агента Kharebeney на C++

## Общее описание
Переписать агента Kharebeney с MicroPython на C++ для ESP32-S3 с сохранением всей логики и оптимизацией производительности.

## Архитектура
Сохранить текущую архитектуру с следующими компонентами:
- MicroPythonInternalState → C++ InternalState
- MicroPythonBalanceManager → C++ BalanceManager
- MicroPythonEmotionSystem → C++ EmotionSystem
- MicroPythonLearningSystem → C++ LearningSystem
- MicroPythonKnowledgeBase → C++ KnowledgeBase
- MicroPythonDecisionEngine → C++ DecisionEngine
- MicroPythonLifecycleSystem → C++ LifecycleSystem
- MicroPythonMemorySystem → C++ MemorySystem
- MicroPythonPromptSystem → C++ PromptSystem

## Оптимизация ИИ-агента

### 1. Упрощение алгоритмов
- Заменить сложные вычисления на приближенные, но быстрые
- Использовать lookup-таблицы для часто используемых вычислений
- Применить фиксированную точку вместо плавающей где возможно

### 2. Управление памятью
- Использовать стековую память вместо кучи где возможно
- Предварительно выделить память для часто используемых объектов
- Использовать объектные пулы для повторного использования объектов

### 3. Оптимизация структур данных
- Использовать массивы фиксированного размера вместо динамических контейнеров
- Применить структуры данных с предсказуемым временем доступа
- Минимизировать количество аллокаций во время выполнения

### 4. Асинхронные операции
- Разделить критические и некритические по времени операции
- Использовать таймеры для распределения нагрузки
- Реализовать неблокирующий I/O

### 5. Оптимизация принятия решений
- Использовать упрощенные модели принятия решений
- Применить хеширование для быстрого доступа к данным
- Реализовать кэширование результатов вычислений

## Файловая система
- Сохранить форматы файлов состояния
- Оптимизировать частоту сохранения
- Использовать бинарные форматы для критических данных

## Интерфейс
- Сохранить тот же API для внешнего взаимодействия
- Обеспечить обратную совместимость с существующими модулями